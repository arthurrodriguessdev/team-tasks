{% extends 'form_default.html' %}

{% block inputs %}
    {{ form.as_p }}
{% endblock %}

{% block js_extra %}

<!-- adicionar dinamicamente campos -->
<script>
document.addEventListener('DOMContentLoaded', function () {
    var flag = document.getElementById('id_em_equipe');
    var select = document.getElementById('id_equipe');
    var label = document.querySelector('label[for="id_equipe"]');

    function getContainer() {
        return select.nextElementSibling;
    }

    function esconder_campos() {
        var container = getContainer();
        if (!container) return;

        container.style.display = 'none';
        label.style.display = 'none';
        select.required = false;
    }

    function mostrar_campos() {
        var container = getContainer();
        if (!container) return;

        container.style.display = '';
        label.style.display = '';
        select.required = true;
    }

    var tentativas = 0;
    var intervalo = setInterval(function () {
        if (getContainer()) {
            clearInterval(intervalo);
            esconder_campos();
        }
        tentativas++;
        if (tentativas > 20) clearInterval(intervalo);
    }, 50);

    flag.addEventListener('change', function () {
        if(flag.checked){
            mostrar_campos();
        } else{
            esconder_campos();
        }
    });
});
</script>

{% endblock %}
